(function(e,t){typeof define=="function"&&define.amd?define("IClick",[],function(){return t()}):e.IClick=t()})(this,function(){function e(e){var t=Array.prototype.splice.call(arguments,1),n;if(!e)return null;t.length==1&&t[0].indexOf(".")>-1&&(t=t[0].split("."));while(n=t.shift()){if(e==null)return null;e=e[n]}return e}function t(e,t){for(var n in t)e[n]=t[n]}function n(e){this.resetFiredFlag=this.resetFiredFlag.bind(this),this.rootElement=e||document,this.attach()}return n.EVENT_NAME="IClick",n.addDevice=function(r,i){n.start_events[i.start_event]=r,n.eventHandlers[r]=i.handlers,t(n.event_map,i.event_map)},n.start_events={},n.eventHandlers={},n.event_map={},n.prototype={constructor:n,IClickPrevented:!1,state:"INITIAL",moved:!1,absDistX:0,absDistY:0,prevPageX:0,prevPageY:0,fired:!1,max_move:5,attach:function(){var e;for(e in n.start_events)this.rootElement.addEventListener(e,this,!0);return this},detach:function(){var e;for(e in n.start_events)this.rootElement.removeEventListener(e,this,!0);return this.removeEvents(),this},isMoved:function(e){if(this.moved)return!0;this.absDistX+=Math.abs(e.pageX-this.prevPageX),this.absDistY+=Math.abs(e.pageY-this.prevPageY),this.prevPageX=e.pageX,this.prevPageY=e.pageY;if(this.absDistX>this.max_move||this.absDistY>this.max_move)this.moved=!0;return this.moved},fireIClick:function(){var e=this.event,t=e.changedTouches?e.changedTouches[0]:e,r=t.target,i;if(this.moved&&this.IClickPrevented)return;while(r.nodeType!==1)r=r.parentNode;return i=document.createEvent("MouseEvents"),i.initMouseEvent(n.EVENT_NAME,!0,!0,e.view,1,t.screenX,t.screenY,t.clientX,t.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),r.dispatchEvent(i),i.defaultPrevented&&e.preventDefault(),this.$fired=!0,setTimeout(this.resetFiredFlag,300),this},reset:function(){return this.state="INITIAL",this.removeEvents(),this.started=!1,this.IClickPrevented=!1,this},handleEvent:function(e){var t=this,r=e.changedTouches?e.changedTouches[0]:e,i,s=this.state=="INITIAL"&&this.$fired,o;i=e.eventPhase===Event.CAPTURING_PHASE?"CAPTURING":e.eventPhase===Event.BUBBLING_PHASE?"BUBBLING":e.eventPhase,o=n.event_map[e.type];if(o=="START_EVENT"){if(!!s||!!this.started)return;this.init(e.type)}i==="CAPTURING"&&(e.preventIClick=function(){t.IClickPrevented=!0},e.IClickPrevented=function(){return t.IClickPrevented},e.isMoved=function(){return t.moved}),this.event=r,this.fireHandler(o,i,e,r)&&this.state=="INITIAL"&&(this.addEvents(),this.initMoveCheck(r),this.state="ACTIVE"),this.event=null},fireHandler:function(t,n,r,i){var s=e(this.handlers,this.state,t,n),o=s&&s.apply(this,[r,i]);return o!==!1},init:function(e){if(!(e in n.start_events))throw new Error("IClick- unknow start event: "+e);this.input_type=n.start_events[e],this.handlers=this.eventHandlers[this.input_type],this.started=!0},addEvents:function(){var e;for(e in n.event_map[this.input_type]){if(e==this.start_events[this.input_type])continue;this.rootElement.addEventListener(e,this,!0),this.rootElement.addEventListener(e,this,!1)}},removeEvents:function(){var e;for(e in n.names[this.input_type]){if(e==this.start_events[this.input_type])continue;this.rootElement.removeEventListener(e,this,!0),this.rootElement.removeEventListener(e,this,!1)}},initMoveCheck:function(e){this.moved=!1,this.absDistX=0,this.absDistY=0,this.prevPageX=e.pageX,this.prevPageY=e.pageY},resetFiredFlag:function(){this.$fired=!1}},n}),define("devices/mouse.js",["../IClick"],function(e){e.addDevice("mouse",{start_event:"mousedown",event_map:{mousedown:"START_EVENT",mouseup:"M_END_EVENT",mousemove:"MOVE_EVENT"},handlers:{INITIAL:{START_EVENT:{CAPTURING:function(e,t){if(typeof e.button=="number"&&e.button!==0)return!1;this.firstClickTarget=t.target}}},ACTIVE:{START_EVENT:{CAPTURING:function(e,t){this.firstClickTarget=t.target,this.initMoveCheck(t)}},M_MOVE_EVENT:{CAPTURING:function(e,t){e.IClickMoved=this.isMoved(t)}},M_END_EVENT:{BUBBLING:function(e,t){this.state="INITIAL",this.reset(),this.firstClickTarget===t.target&&this.fireIClick()}}}}})}),define("devices/pointer.js",["../IClick"],function(e){e.addDevice("pointer",{start_event:"pointerdown",event_map:{pointerdown:"START_EVENT",pointerup:"P_END_EVENT",pointermove:"P_MOVE_EVENT",pointercancel:"P_CANCEL_EVENT"},handlers:{ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},P_MOVE_EVENT:{CAPTURING:function(e,t){e.IClickMoved=this.isMoved(t)}},P_END_EVENT:{BUBBLING:function(e,t){this.reset(),this.fireIClick()}},P_CANCEL_EVENT:{CAPTURING:function(){this.reset()}}}}}),e.addDevice("MSPointer",{start_event:"mspointerdown",event_map:{mspointerdown:"START_EVENT",mspointerup:"MS_P_END_EVENT",mspointermove:"MS_P_MOVE_EVENT",mspointercancel:"MS_P_CANCEL_EVENT"},handlers:{ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},MS_P_MOVE_EVENT:{CAPTURING:function(e,t){this.isMoved(t)}},MS_P_END_EVENT:{BUBBLING:function(e,t){this.reset(),this.fireIClick()}},MS_P_CANCEL_EVENT:{CAPTURING:function(){this.reset()}}}}})}),define("devices/touch.js",["../IClick"],function(e){e.addDevice("touch",{start_event:"touchstart",event_map:{touchstart:"START_EVENT",touchend:"T_END_EVENT",touchmove:"T_MOVE_EVENT",touchcancel:"T_CANCEL_EVENT"},handlers:{INITIAL:{START_EVENT:{CAPTURING:function(e,t){this.state="TOUCHED",e.touches.length>1&&(this.IClickPrevented=!0),this.firstTouchIdentifier=t.identifier,this.firstTouchTarget=t.target}}},ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},T_MOVE_EVENT:{CAPTURING:function(e,t){this.firstTouchIdentifier===t.identifier&&(e.IClickMoved=this.isMoved(t))}},T_END_EVENT:{BUBBLING:function(e,t){e.touches.length===0&&(this.reset(),this.firstTouchTarget===t.target&&this.fireIClick())}},T_CANCEL_EVENT:{CAPTURING:function(){this.reset()}}}}})}),require(["IClick","devices/mouse.js","devices/pointer.js","devices/touch.js"],function(e){return e}),define("Combined",function(){});