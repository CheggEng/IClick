(function(e,t){typeof define=="function"&&define.amd?define("IClick",[],function(){return t()}):e.IClick=t()})(this,function(){function e(e){var t=Array.prototype.splice.call(arguments,1),n;if(!e)return null;t.length==1&&t[0].indexOf(".")>-1&&(t=t[0].split("."));while(n=t.shift()){if(e==null)return null;e=e[n]}return e}function t(e,t){for(var n in t)e[n]=t[n]}function n(e){this.resetFiredFlag=this.resetFiredFlag.bind(this),this.eventHandlers=n.eventHandlers,this.start_events=n.start_events,this.event_map=n.event_map,this.rootElement=e||document,this.attach()}return n.addDevice=function(t,r){n.start_events[r.start_event]=t,n.eventHandlers[t]=r.handlers,n.event_map[t]=r.event_map},n.start_events={},n.eventHandlers={},n.event_map={},n.prototype={constructor:n,event_name:"iclick",prevent_click:!1,iclickPrevented:!1,state:"INITIAL",moved:!1,absDistX:0,absDistY:0,prevPageX:0,prevPageY:0,fired:!1,max_move:5,attach:function(){var e;for(e in this.start_events)this.rootElement.addEventListener(e,this,!0);return this},detach:function(){var e;for(e in this.start_events)this.rootElement.removeEventListener(e,this,!0);return this.removeEvents(),this},isMoved:function(e){if(this.moved)return!0;this.absDistX+=Math.abs(e.pageX-this.prevPageX),this.absDistY+=Math.abs(e.pageY-this.prevPageY),this.prevPageX=e.pageX,this.prevPageY=e.pageY;if(this.absDistX>this.max_move||this.absDistY>this.max_move)this.moved=!0;return this.moved},fireIClick:function(){var e=this.event,t=e.changedTouches?e.changedTouches[0]:e,n=t.target,r;if(this.moved&&this.iclickPrevented)return;while(n.nodeType!==1)n=n.parentNode;return r=document.createEvent("MouseEvents"),r.initMouseEvent(this.event_name,!0,!0,e.view,1,t.screenX,t.screenY,t.clientX,t.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(r),(r.defaultPrevented||this.prevent_click)&&e.preventDefault(),this.$fired=!0,clearTimeout(this.handle),this.handle=setTimeout(this.resetFiredFlag,300),this},reset:function(){return this.state="INITIAL",this.removeEvents(),this.started=!1,this.iclickPrevented=!1,this},getType:function(e){var t=e.type;return t in this.start_events?"START_EVENT":this.event_map[this.input_type][t]},handleEvent:function(e){var t=this,n=e.changedTouches?e.changedTouches[0]:e,r,i;r=e.eventPhase===Event.CAPTURING_PHASE?"CAPTURING":e.eventPhase===Event.BUBBLING_PHASE?"BUBBLING":e.eventPhase,i=this.getType(e);if(i=="START_EVENT"){if(!!this.$fired||!!this.started)return;this.init(e.type)}r==="CAPTURING"&&(e.preventIClick=function(){t.iclickPrevented=!0},e.isMoved=function(){return t.moved}),this.event=e,this.fireHandler(i,r,e,n)&&this.state=="INITIAL"&&(this.addEvents(),this.initMoveCheck(n),this.state="ACTIVE"),this.event=null},fireHandler:function(t,n,r,i){var s=e(this.handlers,this.state,t,n),o=s&&s.apply(this,[r,i]);return o!==!1},init:function(e){if(!(e in this.start_events))throw new Error("IClick- unknow start event: "+e);this.reset(),this.input_type=this.start_events[e],this.handlers=this.eventHandlers[this.input_type],this.started=!0},addEvents:function(){var e;for(e in this.event_map[this.input_type])this.rootElement.addEventListener(e,this,!0),this.rootElement.addEventListener(e,this,!1)},removeEvents:function(){var e;for(e in this.event_map[this.input_type])this.rootElement.removeEventListener(e,this,!0),this.rootElement.removeEventListener(e,this,!1)},initMoveCheck:function(e){this.moved=!1,this.absDistX=0,this.absDistY=0,this.prevPageX=e.pageX,this.prevPageY=e.pageY},resetFiredFlag:function(){this.$fired=!1}},n}),define("devices/mouse.js",["../IClick"],function(e){e.addDevice("mouse",{start_event:"mousedown",event_map:{mouseup:"M_END_EVENT",mousemove:"MOVE_EVENT"},handlers:{INITIAL:{START_EVENT:{CAPTURING:function(e,t){if(typeof e.button=="number"&&e.button!==0)return!1;this.firstClickTarget=t.target}}},ACTIVE:{START_EVENT:{CAPTURING:function(e,t){this.firstClickTarget=t.target,this.initMoveCheck(t)}},M_MOVE_EVENT:{CAPTURING:function(e,t){e.IClickMoved=this.isMoved(t)}},M_END_EVENT:{BUBBLING:function(e,t){this.reset(),this.firstClickTarget===t.target&&this.fireIClick(),this.firstClickTarget=null}}}}})}),define("devices/pointer.js",["../IClick"],function(e){e.addDevice("pointer",{start_event:"pointerdown",event_map:{pointerup:"P_END_EVENT",pointermove:"P_MOVE_EVENT",pointercancel:"P_CANCEL_EVENT"},handlers:{ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},P_MOVE_EVENT:{CAPTURING:function(e,t){e.IClickMoved=this.isMoved(t)}},P_END_EVENT:{BUBBLING:function(e,t){this.reset(),this.fireIClick()}},P_CANCEL_EVENT:{CAPTURING:function(){this.reset()}}}}}),e.addDevice("MSPointer",{start_event:"mspointerdown",event_map:{mspointerdown:"START_EVENT",mspointerup:"MS_P_END_EVENT",mspointermove:"MS_P_MOVE_EVENT",mspointercancel:"MS_P_CANCEL_EVENT"},handlers:{ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},MS_P_MOVE_EVENT:{CAPTURING:function(e,t){this.isMoved(t)}},MS_P_END_EVENT:{BUBBLING:function(e,t){this.reset(),this.fireIClick()}},MS_P_CANCEL_EVENT:{CAPTURING:function(){this.reset()}}}}})}),define("devices/touch.js",["../IClick"],function(e){e.addDevice("touch",{start_event:"touchstart",event_map:{touchend:"T_END_EVENT",touchmove:"T_MOVE_EVENT",touchcancel:"T_CANCEL_EVENT"},handlers:{INITIAL:{START_EVENT:{CAPTURING:function(e,t){e.touches.length>1&&(this.IClickPrevented=!0),this.firstTouchIdentifier=t.identifier,this.firstTouchTarget=t.target}}},ACTIVE:{START_EVENT:{CAPTURING:function(){this.IClickPrevented=!0}},T_MOVE_EVENT:{CAPTURING:function(e,t){this.firstTouchIdentifier===t.identifier&&(e.IClickMoved=this.isMoved(t))}},T_END_EVENT:{BUBBLING:function(e,t){e.touches.length===0&&(this.reset(),this.firstTouchTarget===t.target&&this.fireIClick(),this.firstTouchTarget=null,this.firstTouchIdentifier=null)}},T_CANCEL_EVENT:{CAPTURING:function(){this.reset(),this.firstTouchTarget=null,this.firstTouchIdentifier=null}}}}})}),require(["IClick","devices/mouse.js","devices/pointer.js","devices/touch.js"],function(e){return e}),define("Combined",function(){});